import{a as h,f as S,I as d,h as D,e as E,i as N,o as c,c as m,b as t,p as b,q as g,d as p,t as P,w as f,v as u,j as _,J as V}from"./app-CKzLx4Uk.js";import"https://code.jquery.com/jquery-3.7.1.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const j="/build/assets/profile_default_img-t7MiHtXB.svg",B={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},I={class:"ps-3"},L={"aria-label":"breadcrumb"},R={class:"breadcrumb mb-0 p-0"},T={class:"breadcrumb-item"},M={class:"breadcrumb-item"},F={class:"card"},H={id:"addUserform"},O={class:"card-body"},q={class:"row"},z={class:"col-lg-2"},J={class:"mb-3 pt-0 text-center mx-auto"},W={key:0,src:"",height:"150",width:"150",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},X=["src"],G={key:2,src:j,height:"150",width:"150",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},K={class:"col-lg-8",style:{"border-left":"2px solid #dfeffd"}},Q={class:"row"},Y={class:"col-md-6"},Z={class:"row"},ee={class:"col-md-12"},te={class:"col-md-12 mt-2"},oe={class:"col-md-6"},se={class:"row"},le={class:"col-md-12"},re={class:"col-md-12 mt-2"},ae={class:"card-footer"},pe={__name:"create",setup(ie){const v=h(),s=S({useEmail:v.email,name:"",email:"",staff_id:"",profile_picture:"",phone:"",dept_name:"",desg:"",off_loct:"",report_to:"",role_id:""});w();async function w(){try{const e=await d.get("getAllDept");var o=[];$.each(e.data,function(r,l){var i={id:l.id,text:l.name};o.push(i)}),$("#deptment_id").select2({placeholder:"=Select=",theme:"bootstrap-5",width:"100%",allowClear:!0,height:"50",data:o})}catch{}}y();async function y(){try{const e=await d.get("getAllDesign");var o=[];$.each(e.data,function(r,l){var i={id:l.id,text:l.name};o.push(i)}),$("#desg_id").select2({placeholder:"=Select=",theme:"bootstrap-5",width:"100%",allowClear:!0,height:"50",data:o})}catch{}}x();async function x(){try{const e=await d.get("getAllOffLoc");var o=[];$.each(e.data,function(r,l){var i={id:l.id,text:l.name};o.push(i)}),$("#off_loc").select2({placeholder:"=Select=",theme:"bootstrap-5",width:"100%",allowClear:!0,height:"50",data:o})}catch{}}C();async function C(){try{const e=await d.get("getAllRoles");var o=[];$.each(e.data,function(r,l){var i={id:l.id,text:l.name};o.push(i)}),$("#role_id").select2({placeholder:"=Select=",theme:"bootstrap-5",width:"100%",allowClear:!0,height:"50",data:o})}catch{}}k();async function k(){try{const e=await d.get("getAllUsers");var o=[];$.each(e.data,function(r,l){var i={id:l.id,text:l.name};o.push(i)}),$("#report_to").select2({placeholder:"=Select=",theme:"bootstrap-5",width:"100%",allowClear:!0,height:"50",data:o})}catch{}}D(()=>{$(".dept_name").on("change",function(){s.dept_name=$(this).val()}),$(".desg").on("change",function(){s.desg=$(this).val()}),$(".off_loc").on("change",function(){s.off_loct=$(this).val()}),$(".report_to").on("change",function(){s.report_to=$(this).val()}),$(".role").on("change",function(){s.role_id=$(this).val()})});async function U(){try{const o=h(),e=o.decryptWithAES(o.token),a=await axios.post("/api/external-user/save",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e,Accept:"application/json"}});document.getElementById("addUserform").reset(),$(".dept_name option:first").prop("selected",!0).trigger("change"),$(".desg option:first").prop("selected",!0).trigger("change"),$(".off_loc option:first").prop("selected",!0).trigger("change"),$(".report_to option:first").prop("selected",!0).trigger("change"),$(".role option:first").prop("selected",!0).trigger("change"),n.value="",Notification.showToast("s",a.data.message)}catch(o){ErrorCatch.CatchError(o)}}const n=E(""),A=o=>{s.profile_picture=o.target.files[0];const e=new FileReader;e.readAsDataURL(s.profile_picture),e.onload=a=>{n.value=a.target.result}};return(o,e)=>{const a=N("router-link");return c(),m(V,null,[t("div",B,[e[8]||(e[8]=t("div",{class:"breadcrumb-title pe-3"},"User Managemnet",-1)),t("div",I,[t("nav",L,[t("ol",R,[t("li",T,[b(a,{to:{name:"Home"}},{default:g(()=>e[5]||(e[5]=[p("Dashboard")])),_:1})]),t("li",M,[b(a,{to:{name:"UserList"}},{default:g(()=>e[6]||(e[6]=[p("User List")])),_:1})]),e[7]||(e[7]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Create New User",-1))])])])]),t("div",F,[e[19]||(e[19]=t("div",{class:"card-header"},[t("h5",{class:"m-0 p-0",style:{"border-left":"5px solid #7239ea"}}," Â  Create New User")],-1)),t("form",H,[t("div",O,[t("div",q,[t("div",z,[e[11]||(e[11]=t("p",{class:"text-center"},"Profile Image",-1)),t("div",J,[e[9]||(e[9]=p(" <<<<<<< HEAD ")),n.value?P("",!0):(c(),m("img",W)),e[10]||(e[10]=p(" ======= >>>>>>> 9ddb7fe0cf9fca5ad5cae40e6c047ebe6c93055c ")),n.value?(c(),m("img",{key:1,src:n.value,height:"150",width:"150",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},null,8,X)):(c(),m("img",G))]),t("input",{type:"file",id:"profile-picture",ref:"profilePicture",class:"w-1/2",onChange:A,accept:"image/*"},null,544)]),t("div",K,[t("div",Q,[t("div",Y,[t("div",Z,[t("div",ee,[e[12]||(e[12]=t("label",{for:"input1",class:"form-label"},"Name",-1)),f(t("input",{type:"text",class:"form-control form-control-sm",id:"name",placeholder:"Enter Name","onUpdate:modelValue":e[0]||(e[0]=r=>s.name=r)},null,512),[[u,s.name]])]),t("div",te,[e[13]||(e[13]=t("label",{for:"input4",class:"form-label"},"Email",-1)),f(t("input",{type:"email",class:"form-control form-control-sm",id:"input4",placeholder:"Email","onUpdate:modelValue":e[1]||(e[1]=r=>s.email=r)},null,512),[[u,s.email]])]),e[14]||(e[14]=_('<div class="col-md-12 mt-2"><label for="input7" class="form-label">Department</label><select id="deptment_id" class="form-control form-control-sm dept_name"><option>Choose...</option></select></div><div class="col-md-12 mt-2"><label for="input11" class="form-label">Office Location</label><select id="off_loc" class="form-control form-control-sm off_loc"><option>Choose...</option></select></div><div class="col-md-12 mt-2"><label for="input11" class="form-label">Role</label><select id="role_id" class="form-control form-control-sm role"><option>Choose...</option></select></div>',3))])]),t("div",oe,[t("div",se,[t("div",le,[e[15]||(e[15]=t("label",{for:"input1",class:"form-label"},"Staff ID",-1)),f(t("input",{type:"text",class:"form-control form-control-sm",id:"input1",placeholder:"Enter Name","onUpdate:modelValue":e[2]||(e[2]=r=>s.staff_id=r)},null,512),[[u,s.staff_id]])]),t("div",re,[e[16]||(e[16]=t("label",{for:"input4",class:"form-label"},"Phone",-1)),f(t("input",{type:"number",class:"form-control form-control-sm",id:"input4",placeholder:"Phone","onUpdate:modelValue":e[3]||(e[3]=r=>s.phone=r)},null,512),[[u,s.phone]])]),e[17]||(e[17]=_('<div class="col-md-12 mt-2"><label for="input4" class="form-label">Designation</label><select id="desg_id" class="form-control form-control-sm desg"><option>Choose...</option></select></div><div class="col-md-12 mt-2"><label for="input4" class="form-label">Report To</label><select id="report_to" class="form-control form-control-sm report_to"><option>Choose...</option></select></div>',2))])])])])])]),t("div",ae,[t("button",{type:"button",onClick:e[4]||(e[4]=r=>U()),class:"m-2 btn btn-sm btn-info px-4 ms-2 float-end text-white"},"Save"),e[18]||(e[18]=t("button",{class:"m-2 btn btn-sm btn-danger px-4 ms-2 float-end"},"Back",-1))])])])],64)}}};export{pe as default};
