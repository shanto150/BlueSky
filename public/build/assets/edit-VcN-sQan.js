import{a as g,e as C,E as m,h as V,i as U,o as w,c as R,b as s,p as u,q as p,d as b,j as E,w as o,a7 as a,k as S,F as D}from"./app-tzkZDYTN.js";import"https://code.jquery.com/jquery-3.7.1.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const P={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},A={class:"ps-3"},B={"aria-label":"breadcrumb"},T={class:"breadcrumb mb-0 p-0"},F={class:"breadcrumb-item"},M={class:"breadcrumb-item"},I={class:"card"},L={class:"card-body"},j={class:"row"},q={class:"col-md-4"},H={class:"card"},J={class:"card-body"},O={class:"form-check"},z={class:"form-check"},G={class:"form-check"},K={class:"form-check"},Q={class:"col-md-4"},W={class:"card"},X={class:"card-body"},Y={class:"form-check"},Z={class:"form-check"},ee={class:"form-check"},se={class:"form-check"},te={class:"col-md-4"},le={class:"card"},oe={class:"card-body"},ae={class:"form-check"},ce={class:"form-check"},de={class:"form-check"},ie={class:"form-check"},pe={__name:"edit",props:["id"],setup(k){const v=g(),i=k,l=C({roleName:"",status_val:"",checkedNames:[],useEmail:v.email,error:"",role_id:i.id});r(i);async function r(d){try{const c=await m.post("editRole",{id:d}),t=c.data[0].name;$("#role_name").val(t);const y=c.data[0].status;$("#status").val(y),$("#status").trigger("change");const _=await m.post("getPermissionList",{id:d});var e=$(".form-check-input").map(function(){return this.value}).get();$.each(_.data,function(x,n){e[x]==n.feature_name&&$("input[id="+n.feature_name+"]").prop("checked",!0)})}catch(c){console.log(c)}}V(()=>{$(".form-check-input").on("change",function(){$(this).is(":checked")==!0&&r(i)}),$("#status").on("change",function(){var d=$(this).val();$("#status_val").val(d)})});function f(){N(l)}const h=document.head.querySelector('meta[name="api-base-url"]').content,N=async d=>{try{const c={method:"post",url:h+"/api/role/update",headers:{"Content-Type":"application/json"},data:JSON.stringify(d.value)},t=await axios(c);t.data.types=="s"?(document.getElementById("editRoleForm").reset(),Notification.showToast(t.data.types,t.data.message)):t.data.types=="e"&&Notification.showToast(t.data.types,t.data.message)}catch(e){Notification.showToast("e",e)}};return(d,e)=>{const c=U("router-link");return w(),R(D,null,[s("div",P,[e[15]||(e[15]=s("div",{class:"breadcrumb-title pe-3"},"Settings",-1)),s("div",A,[s("nav",B,[s("ol",T,[s("li",F,[u(c,{to:{name:"Home"}},{default:p(()=>e[12]||(e[12]=[b("Dashboard")])),_:1})]),s("li",M,[u(c,{to:{name:"roleList"}},{default:p(()=>e[13]||(e[13]=[b("Role-permission List")])),_:1})]),e[14]||(e[14]=s("li",{class:"breadcrumb-item active","aria-current":"page"},"Update Role",-1))])])])]),s("form",{onSubmit:S(f,["prevent"]),id:"editRoleForm"},[e[33]||(e[33]=E('<div class="card"><div class="card-body"><div class="row"><div class="col-md-6 mb-3"><label class="form-label">Role Name</label><input type="text" class="form-control form-control-sm" placeholder="Enter Role Name" name="role_name" id="role_name"></div><div class="col-md-6 mb-3"><label class="form-label">Status</label><select name="status" class="form-control form-control-sm" id="status"><option value="1" selected>Active</option><option value="2">Inactive</option></select></div></div></div></div>',1)),s("div",I,[e[31]||(e[31]=s("div",{class:"card-header"},[s("h5",{class:"m-0 p-0",style:{"border-left":"5px solid #7239ea"}}," Â  Assign Permission")],-1)),s("div",L,[s("div",j,[s("div",q,[s("div",H,[e[20]||(e[20]=s("div",{style:{"background-color":"#746a892b"},class:"card-header m-0 pl-2 pb-0"},[s("h6",{class:"text-blue"},"Role Permission")],-1)),s("div",J,[s("div",O,[o(s("input",{class:"form-check-input",type:"checkbox",id:"role_create",value:"role_create","onUpdate:modelValue":e[0]||(e[0]=t=>l.value.checkedNames=t)},null,512),[[a,l.value.checkedNames]]),e[16]||(e[16]=s("label",{class:"form-check-label",for:"create"},"Create",-1))]),s("div",z,[o(s("input",{class:"form-check-input",type:"checkbox",id:"role_edit",value:"role_edit","onUpdate:modelValue":e[1]||(e[1]=t=>l.value.checkedNames=t)},null,512),[[a,l.value.checkedNames]]),e[17]||(e[17]=s("label",{class:"form-check-label",for:"Edit"},"Edit",-1))]),s("div",G,[o(s("input",{class:"form-check-input",type:"checkbox",id:"role_delete",value:"role_delete","onUpdate:modelValue":e[2]||(e[2]=t=>l.value.checkedNames=t)},null,512),[[a,l.value.checkedNames]]),e[18]||(e[18]=s("label",{class:"form-check-label",for:"Delete"},"Delete",-1))]),s("div",K,[o(s("input",{class:"form-check-input",type:"checkbox",value:"role_assign_permission",id:"role_assign_permission","onUpdate:modelValue":e[3]||(e[3]=t=>l.value.checkedNames=t)},null,512),[[a,l.value.checkedNames]]),e[19]||(e[19]=s("label",{class:"form-check-label",for:"Assign Permission"},"Assign Permission",-1))])])])]),s("div",Q,[s("div",W,[e[25]||(e[25]=s("div",{style:{"background-color":"#746a892b"},class:"card-header m-0 pl-2 pb-0"},[s("h6",{class:"text-blue"},"B2B Agent")],-1)),s("div",X,[s("div",Y,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[4]||(e[4]=t=>l.value.checkedNames=t),type:"checkbox",id:"b2b_create",value:"b2b_create"},null,512),[[a,l.value.checkedNames]]),e[21]||(e[21]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Create",-1))]),s("div",Z,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[5]||(e[5]=t=>l.value.checkedNames=t),type:"checkbox",id:"b2b_edit",value:"b2b_edit"},null,512),[[a,l.value.checkedNames]]),e[22]||(e[22]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Edit",-1))]),s("div",ee,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[6]||(e[6]=t=>l.value.checkedNames=t),type:"checkbox",id:"b2b_delete",value:"b2b_delete"},null,512),[[a,l.value.checkedNames]]),e[23]||(e[23]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Delete",-1))]),s("div",se,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[7]||(e[7]=t=>l.value.checkedNames=t),type:"checkbox",id:"b2b_print",value:"b2b_print"},null,512),[[a,l.value.checkedNames]]),e[24]||(e[24]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Print",-1))])])])]),s("div",te,[s("div",le,[e[30]||(e[30]=s("div",{style:{"background-color":"#746a892b"},class:"card-header m-0 pl-2 pb-0"},[s("h6",{class:"text-blue"},"User Management")],-1)),s("div",oe,[s("div",ae,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[8]||(e[8]=t=>l.value.checkedNames=t),type:"checkbox",value:"user_create"},null,512),[[a,l.value.checkedNames]]),e[26]||(e[26]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Create",-1))]),s("div",ce,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[9]||(e[9]=t=>l.value.checkedNames=t),type:"checkbox",value:"user_edit"},null,512),[[a,l.value.checkedNames]]),e[27]||(e[27]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Edit",-1))]),s("div",de,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[10]||(e[10]=t=>l.value.checkedNames=t),type:"checkbox",value:"user_delete"},null,512),[[a,l.value.checkedNames]]),e[28]||(e[28]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Delete",-1))]),s("div",ie,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[11]||(e[11]=t=>l.value.checkedNames=t),type:"checkbox",value:"user_print"},null,512),[[a,l.value.checkedNames]]),e[29]||(e[29]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Print",-1))])])])])])]),e[32]||(e[32]=s("div",{class:"card-footer"},[s("button",{type:"submit",class:"btn btn-sm btn-success"}," Update ")],-1))])],32)],64)}}};export{pe as default};
