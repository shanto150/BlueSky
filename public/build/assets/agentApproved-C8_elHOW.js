import{e as q,f as G,a as X,F as n,N as b,h as J,i as Q,c,o as m,b as e,p,q as h,d as _,j as g,w as f,O as W,v as Z,G as tt}from"./app-BmYSoTh-.js";import{_ as et}from"./Plane_origin-HeMbFHkK.js";import"https://code.jquery.com/jquery-3.7.1.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const at={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},st={class:"ps-3"},lt={"aria-label":"breadcrumb"},dt={class:"breadcrumb mb-0 p-0"},ot={class:"breadcrumb-item"},rt={class:"breadcrumb-item"},nt={class:"row"},it={class:"col-lg-3"},ct={class:"card"},mt={class:"card-body"},bt={class:"d-flex flex-column align-items-center text-center"},pt=["src"],ht={key:1,src:et,height:"60",width:"60",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},_t={class:"col-lg-3"},gt={id:"addApprovalForm"},ft={class:"card"},vt={class:"card-body"},ut={class:"row"},wt={class:"col-md-12"},yt={class:"col-md-12 mt-2"},$t={class:"card-footer"},At={class:"d-block"},Nt={__name:"agentApproved",props:["ids"],setup(v){const r=v,i=q(""),l=G({note:"",status:"",agent_id:"",useEmail:X().email});u(r.ids);async function u(d){try{const t=await n.post("recommendedAgent",{id:d}),o=t.data[0].name,a=t.data[0].status,s=t.data[0].email,x=t.data[0].established_date,k=t.data[0].address,j=t.data[0].phone,C=t.data[0].country,D=t.data[0].city,N=t.data[0].zone,I=t.data[0].agent_code,M=t.data[0].postal_code,B=t.data[0].reg_number,R=t.data[0].fax,P=t.data[0].ca_number,L=t.data[0].trade_licence,T=t.data[0].iata_number,Y=t.data[0].hajj_agency_number,E=t.data[0].owner,S=t.data[0].designation,V=t.data[0].owner_nid,z=t.data[0].dob,F=t.data[0].owner_email,H=t.data[0].owner_phone,K=t.data[0].kam,O=t.data[0].remarks,U=t.data[0].logo_path;i.value=U,a=="Pending"?($("#status_color").addClass("text-warning bg-light-warning"),$("#cstatus").html(a)):a=="Approved"?($("#status_color").addClass("text-success bg-light-success"),$("#cstatus").html(a)):a=="Hold"?($("#status_color").addClass("text-warning bg-light-warning"),$("#cstatus").html(a)):a=="Recommended"?($("#status_color").addClass("text-info bg-light-info"),$("#cstatus").html(a)):a=="Reject"&&($("#status_color").addClass("text-danger bg-light-danger"),$("#cstatus").html(a)),$(".agency_name").html(o),$(".email").html(s),$(".est_date").html(b(x).format("DD-MMM-YYYY")),$(".ownerdob").html(b(z).format("DD-MMM-YYYY")),$(".address").html(k),$(".phone").html(j),$(".country").html(C),$(".city").html(D),$(".zone").html(N),$(".agent_code").html(I),$(".postal_code").html(M),$(".reg_number").html(B),$(".fax").html(R),$(".ca_number").html(P),$(".trade_licence").html(L),$(".iata_number").html(T),$(".hajj_agency_number").html(Y),$(".owner_name").html(E),$(".owner_designation").html(S),$(".owner_nid").html(V),$(".owner_email").html(F),$(".owner_phone").html(H),$(".kam_name").html(K),$(".remarks").html(O)}catch(t){console.log(t)}}w(r.ids);async function w(d){try{const t=await n.post("AgentAllImage",{id:d});$.each(t.data,function(o,a){var s="";a.attachment_type=="trade_licence_img"?s="Trade Licence":a.attachment_type=="nid_img"?s="NID":a.attachment_type=="ca_img"?s="Agent Owner":a.attachment_type=="iata_img"?s="IATA":a.attachment_type=="hajj_licence_img"?s="Hajj Licence":a.attachment_type=="tin_img"&&(s="TIN"),$("#agent_images").append('<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap"><h6 style="font-size: 14px;" class="mb-0">'+s+'</h6><span class="text-secondary"><img height="40" width="40" src="'+a.attachment_path+'" alt=""></span></li>')})}catch(t){console.log(t)}}y(r.ids);async function y(d){try{const t=await n.post("getAgentApprovalLog",{id:d});$.each(t.data,function(o,a){console.log(a),a.status=="Recommended"?$("#agent_recommended").append('<table class="table table-borderless table-sm table-responsive"> <tbody> <tr> <td class="m-0 pl-2" width="50%"> <label for=""><b>Recommended By:</b></label> <p class="m-0 approver">'+a.approver_name+'</p> </td> <td class="m-0 pl-2" width="50%"> <label for=""><b>Remarks:</b></label> <p class="m-0 approver_remarks">'+a.remarks+"</p> </td> </tr> </tbody> </table>"):a.status=="Approved"&&$("#agent_approved").append('<table class="table table-borderless table-sm table-responsive"> <tbody> <tr> <td class="m-0 pl-2" width="50%"> <label for=""><b>Approved By:</b></label> <p class="m-0">'+a.approver_name+'</p> </td><td class="m-0 pl-2" width="50%"> <label for=""><b>Remarks:</b></label> <p class="m-0 approver_remarks">'+a.remarks+"</p> </td> </tr> </tbody></table>")})}catch(t){console.log(t)}}J(()=>{$("#status").on("change",function(){l.status=$(this).val()})});async function A(d){l.agent_id=d.ids,console.log(l);try{const t=await n.post("/agentApproval/update",l);Notification.showToast("s",t.data.message)}catch(t){ErrorCatch.CatchError(t)}}return(d,t)=>{const o=Q("router-link");return m(),c(tt,null,[e("div",at,[t[6]||(t[6]=e("div",{class:"breadcrumb-title pe-3"},"B2B Agency",-1)),e("div",st,[e("nav",lt,[e("ol",dt,[e("li",ot,[p(o,{to:{name:"Home"}},{default:h(()=>t[3]||(t[3]=[_("Dashboard")])),_:1})]),e("li",rt,[p(o,{to:{name:"AgentList"}},{default:h(()=>t[4]||(t[4]=[_("B2B Agency List")])),_:1})]),t[5]||(t[5]=e("li",{class:"breadcrumb-item active","aria-current":"page"},"Approve Agency",-1))])])])]),e("div",nt,[e("div",it,[e("div",ct,[e("div",mt,[e("div",bt,[i.value?(m(),c("img",{key:0,src:i.value,height:"60",width:"60",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},null,8,pt)):(m(),c("img",ht)),t[7]||(t[7]=e("div",{class:"mt-3"},[e("h4",{class:"agency_name"})],-1))]),t[8]||(t[8]=g('<hr class="my-3"><div class="text-center"> Status: <div class="badge rounded-pill p-2 text-uppercase px-3" id="status_color"><i class="bx bxs-circle me-1"></i> <span id="cstatus"></span></div></div><hr class="my-2"><ul class="list-group list-group-flush"><span id="agent_images"></span></ul>',4))])])]),t[14]||(t[14]=g('<div class="col-lg-6"><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #027de2;">   Agency Details</h5></div><div class="card-body"><div class="row g-3"><div class="col-md-12"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Name:</b></label><p class="m-0 agency_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Established Date:</b></label><p class="m-0 est_date"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Email:</b></label><p class="m-0 email"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Phone: </b></label><p class="m-0 phone"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Country:</b></label><p class="m-0 country"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>District: </b></label><p class="m-0 city"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Address:</b></label><p class="m-0 address">-</p></td><td class="m-0 pl-2" width="50%"><label for=""><b>City: </b></label><p class="m-0 zone"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Agent Code:</b></label><p class="m-0 agent_code"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Registration No: </b></label><p class="m-0 reg_number"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Postal Code:</b></label><p class="m-0 postal_code"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>FAX: </b></label><p class="m-0 fax"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Civil Aviation Certificate No:</b></label><p class="m-0 ca_number">-</p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Trade License: </b></label><p class="m-0 trade_licence">-</p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>IATA:</b></label><p class="m-0 iata_number"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Hajj License: </b></label><p class="m-0 hajj_agency_number"></p></td></tr></tbody></table></div></div></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #7239ea;">   Primary User Infomation</h5></div><div class="card-body"><div class="row"><div class="col-md-12"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Owner&#39;s Name:</b></label><p class="m-0 owner_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Designation:</b></label><p class="m-0 owner_designation"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>NID:</b></label><p class="m-0 owner_nid"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Date of Birth: </b></label><p class="m-0 ownerdob"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Email:</b></label><p class="m-0 owner_email"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Phone: </b></label><p class="m-0 owner_phone">x</p></td></tr></tbody></table></div></div></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #00d54a;">   KAM Infomation &amp; Remarks </h5></div><div class="card-body"><div class="row"><div class="col-md-12"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>KAM:</b></label><p class="m-0 kam_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Remarks: </b></label><p class="m-0 remarks"></p></td></tr></tbody></table></div></div></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #d5bd00;">   Recommendeation</h5></div><div class="card-body"><span id="agent_recommended"></span></div></div></div></div>',1)),e("div",_t,[e("form",gt,[e("div",ft,[t[13]||(t[13]=e("div",{class:"card-header"},[e("h5",{class:"m-0 p-0",style:{"border-left":"5px solid #00d54a"}},"   Approval")],-1)),e("div",vt,[e("div",ut,[e("div",wt,[t[10]||(t[10]=e("label",{for:"Kam",class:"form-label"},"Status",-1)),f(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[0]||(t[0]=a=>l.status=a),id:"status","aria-label":"Default select example"},t[9]||(t[9]=[e("option",{value:"Approved",selected:""},"Approved",-1),e("option",{value:"Decline"},"Decline",-1)]),512),[[W,l.status]])]),e("div",yt,[t[11]||(t[11]=e("label",{for:"date",class:"form-label"},"Note",-1)),f(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.note=a),class:"form-control form-control-sm",name:"note",id:"note"},null,512),[[Z,l.note]])])])]),e("div",$t,[e("div",At,[t[12]||(t[12]=e("button",{class:"btn btn-sm btn-outline-danger float-left"},"Cancel",-1)),e("button",{type:"button",onClick:t[2]||(t[2]=a=>A(r)),class:"btn btn-sm btn-outline-primary float-end"},"Submit")])])])])])])],64)}}};export{Nt as default};
