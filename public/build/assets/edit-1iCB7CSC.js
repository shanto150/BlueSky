import{a as x,e as g,F as r,h as y,i as C,c as V,o as U,b as s,p as u,q as p,d as b,j as w,w as o,v as E,a7 as a,k as R,G as S}from"./app-DEkpnQZt.js";import"https://code.jquery.com/jquery-3.7.1.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const D={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},P={class:"ps-3"},A={"aria-label":"breadcrumb"},B={class:"breadcrumb mb-0 p-0"},M={class:"breadcrumb-item"},T={class:"breadcrumb-item"},F={class:"card"},I={class:"card-body"},L={class:"row"},j={class:"col-md-6 mb-3"},q={class:"card"},G={class:"card-body"},H={class:"row"},J={class:"col-md-4"},O={class:"card"},z={class:"card-body"},K={class:"form-check"},Q={class:"form-check"},W={class:"form-check"},X={class:"form-check"},Y={class:"col-md-4"},Z={class:"card"},ee={class:"card-body"},se={class:"form-check"},te={class:"form-check"},le={class:"form-check"},oe={class:"form-check"},ae={class:"col-md-4"},ce={class:"card"},de={class:"card-body"},ie={class:"form-check"},re={class:"form-check"},ne={class:"form-check"},me={class:"form-check"},ve={__name:"edit",props:["id"],setup(k){const v=x(),i=k,t=g({roleName:"",status_val:"",checkedNames:[],useEmail:v.email,error:"",role_id:i.id});n(i);async function n(c){try{const d=await r.post("editRole",{id:c}),l=d.data[0].name;$("#role_name").val(l);const h=d.data[0].status;$("#status").val(h),$("#status").trigger("change");const _=await r.post("getPermissionList",{id:c});var e=$(".form-check-input").map(function(){return this.value}).get();$.each(_.data,function(N,m){e[N]==m.feature_name&&$("input[id="+m.feature_name+"]").prop("checked",!0)})}catch(d){console.log(d)}}y(()=>{$(".form-check-input").on("change",function(){$(this).is(":checked")==!0&&n(i)}),$("#status").on("change",function(){console.log($(this).val()),t.status_val=$(this).val()})});async function f(){try{const c=await r.post("/role/update",JSON.stringify(t.value));document.getElementById("editRoleForm").reset(),c.data.message?Notification.showToast("s",c.data.message):Notification.showToast("E","This action is not allowed.")}catch(c){ErrorCatch.CatchError(c)}}return(c,e)=>{const d=C("router-link");return U(),V(S,null,[s("div",D,[e[16]||(e[16]=s("div",{class:"breadcrumb-title pe-3"},"Settings",-1)),s("div",P,[s("nav",A,[s("ol",B,[s("li",M,[u(d,{to:{name:"Home"}},{default:p(()=>e[13]||(e[13]=[b("Dashboard")])),_:1})]),s("li",T,[u(d,{to:{name:"roleList"}},{default:p(()=>e[14]||(e[14]=[b("Role-permission List")])),_:1})]),e[15]||(e[15]=s("li",{class:"breadcrumb-item active","aria-current":"page"},"Update Role",-1))])])])]),s("form",{onSubmit:R(f,["prevent"]),id:"editRoleForm"},[s("div",F,[s("div",I,[s("div",L,[s("div",j,[e[17]||(e[17]=s("label",{class:"form-label"},"Role Name",-1)),o(s("input",{type:"text",class:"form-control form-control-sm",placeholder:"Enter Role Name",name:"role_name","onUpdate:modelValue":e[0]||(e[0]=l=>t.value.roleName=l),id:"role_name"},null,512),[[E,t.value.roleName,void 0,{trim:!0}]])]),e[18]||(e[18]=w('<div class="col-md-6 mb-3"><label class="form-label">Status</label><select name="status" class="form-control form-control-sm" id="status"><option value="1" selected>Active</option><option value="2">Inactive</option></select></div>',1))])])]),s("div",q,[e[34]||(e[34]=s("div",{class:"card-header"},[s("h5",{class:"m-0 p-0",style:{"border-left":"5px solid #7239ea"}}," Â  Assign Permission")],-1)),s("div",G,[s("div",H,[s("div",J,[s("div",O,[e[23]||(e[23]=s("div",{style:{"background-color":"#746a892b"},class:"card-header m-0 pl-2 pb-0"},[s("h6",{class:"text-blue"},"Role Permission")],-1)),s("div",z,[s("div",K,[o(s("input",{class:"form-check-input",type:"checkbox",id:"role_create",value:"role_create","onUpdate:modelValue":e[1]||(e[1]=l=>t.value.checkedNames=l)},null,512),[[a,t.value.checkedNames]]),e[19]||(e[19]=s("label",{class:"form-check-label",for:"create"},"Create",-1))]),s("div",Q,[o(s("input",{class:"form-check-input",type:"checkbox",id:"role_edit",value:"role_edit","onUpdate:modelValue":e[2]||(e[2]=l=>t.value.checkedNames=l)},null,512),[[a,t.value.checkedNames]]),e[20]||(e[20]=s("label",{class:"form-check-label",for:"Edit"},"Edit",-1))]),s("div",W,[o(s("input",{class:"form-check-input",type:"checkbox",id:"role_delete",value:"role_delete","onUpdate:modelValue":e[3]||(e[3]=l=>t.value.checkedNames=l)},null,512),[[a,t.value.checkedNames]]),e[21]||(e[21]=s("label",{class:"form-check-label",for:"Delete"},"Delete",-1))]),s("div",X,[o(s("input",{class:"form-check-input",type:"checkbox",value:"role_assign_permission",id:"role_assign_permission","onUpdate:modelValue":e[4]||(e[4]=l=>t.value.checkedNames=l)},null,512),[[a,t.value.checkedNames]]),e[22]||(e[22]=s("label",{class:"form-check-label",for:"Assign Permission"},"Assign Permission",-1))])])])]),s("div",Y,[s("div",Z,[e[28]||(e[28]=s("div",{style:{"background-color":"#746a892b"},class:"card-header m-0 pl-2 pb-0"},[s("h6",{class:"text-blue"},"B2B Agent")],-1)),s("div",ee,[s("div",se,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[5]||(e[5]=l=>t.value.checkedNames=l),type:"checkbox",id:"b2b_create",value:"b2b_create"},null,512),[[a,t.value.checkedNames]]),e[24]||(e[24]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Create",-1))]),s("div",te,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[6]||(e[6]=l=>t.value.checkedNames=l),type:"checkbox",id:"b2b_edit",value:"b2b_edit"},null,512),[[a,t.value.checkedNames]]),e[25]||(e[25]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Edit",-1))]),s("div",le,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[7]||(e[7]=l=>t.value.checkedNames=l),type:"checkbox",id:"b2b_delete",value:"b2b_delete"},null,512),[[a,t.value.checkedNames]]),e[26]||(e[26]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Delete",-1))]),s("div",oe,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[8]||(e[8]=l=>t.value.checkedNames=l),type:"checkbox",id:"b2b_print",value:"b2b_print"},null,512),[[a,t.value.checkedNames]]),e[27]||(e[27]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Print",-1))])])])]),s("div",ae,[s("div",ce,[e[33]||(e[33]=s("div",{style:{"background-color":"#746a892b"},class:"card-header m-0 pl-2 pb-0"},[s("h6",{class:"text-blue"},"User Management")],-1)),s("div",de,[s("div",ie,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[9]||(e[9]=l=>t.value.checkedNames=l),type:"checkbox",value:"user_create"},null,512),[[a,t.value.checkedNames]]),e[29]||(e[29]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Create",-1))]),s("div",re,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[10]||(e[10]=l=>t.value.checkedNames=l),type:"checkbox",value:"user_edit"},null,512),[[a,t.value.checkedNames]]),e[30]||(e[30]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Edit",-1))]),s("div",ne,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[11]||(e[11]=l=>t.value.checkedNames=l),type:"checkbox",value:"user_delete"},null,512),[[a,t.value.checkedNames]]),e[31]||(e[31]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Delete",-1))]),s("div",me,[o(s("input",{class:"form-check-input","onUpdate:modelValue":e[12]||(e[12]=l=>t.value.checkedNames=l),type:"checkbox",value:"user_print"},null,512),[[a,t.value.checkedNames]]),e[32]||(e[32]=s("label",{class:"form-check-label",for:"flexCheckChecked"},"Print",-1))])])])])])]),e[35]||(e[35]=s("div",{class:"card-footer"},[s("button",{type:"submit",class:"btn btn-sm btn-success"}," Update ")],-1))])],32)],64)}}};export{ve as default};
