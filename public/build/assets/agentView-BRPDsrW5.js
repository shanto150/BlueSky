import{e as q,R as c,W as m,i as Q,c as n,o as i,b as e,p as b,q as p,d as h,j as _,Q as U}from"./app-CxryYnom.js";import{_ as W}from"./Plane_origin-HeMbFHkK.js";import"https://code.jquery.com/jquery-3.7.1.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const X={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},G={class:"ps-3"},J={"aria-label":"breadcrumb"},Z={class:"breadcrumb mb-0 p-0"},aa={class:"breadcrumb-item"},ta={class:"breadcrumb-item"},ea={class:"row"},sa={class:"col-lg-4"},la={class:"card"},da={class:"card-body"},ra={class:"d-flex flex-column align-items-center text-center"},oa=["src"],ca={key:1,src:W,height:"60",width:"60",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},ha={__name:"agentView",props:["ids"],setup(g){const r=g,o=q("");v(r.ids);async function v(l){try{const a=await c.post("viewAgent",{id:l}),d=a.data[0].name,t=a.data[0].status,s=a.data[0].email,w=a.data[0].established_date,y=a.data[0].address,A=a.data[0].phone,k=a.data[0].country,x=a.data[0].city,j=a.data[0].zone,C=a.data[0].agent_code,D=a.data[0].postal_code,I=a.data[0].reg_number,N=a.data[0].fax,R=a.data[0].ca_number,B=a.data[0].trade_licence,P=a.data[0].iata_number,L=a.data[0].hajj_agency_number,M=a.data[0].owner,Y=a.data[0].designation,T=a.data[0].owner_nid,V=a.data[0].dob,z=a.data[0].owner_email,E=a.data[0].owner_phone,H=a.data[0].kam,F=a.data[0].remarks,K=a.data[0].logo_path,O=a.data[0].approver,S=a.data[0].approver_remarks;o.value=K,t=="Pending"?($("#status_color").addClass("text-warning bg-light-warning"),$("#cstatus").html(t)):t=="Approved"?($("#status_color").addClass("text-success bg-light-success"),$("#cstatus").html(t)):t=="Hold"?($("#status_color").addClass("text-warning bg-light-warning"),$("#cstatus").html(t)):t=="Recommended"?($("#status_color").addClass("text-info bg-light-info"),$("#cstatus").html(t)):t=="Reject"&&($("#status_color").addClass("text-danger bg-light-danger"),$("#cstatus").html(t)),$(".agency_name").html(d),$(".email").html(s),$(".est_date").html(m(w).format("DD-MMM-YYYY")),$(".ownerdob").html(m(V).format("DD-MMM-YYYY")),$(".address").html(y),$(".phone").html(A),$(".country").html(k),$(".city").html(x),$(".zone").html(j),$(".agent_code").html(C),$(".postal_code").html(D),$(".reg_number").html(I),$(".fax").html(N),$(".ca_number").html(R),$(".trade_licence").html(B),$(".iata_number").html(P),$(".hajj_agency_number").html(L),$(".owner_name").html(M),$(".owner_designation").html(Y),$(".owner_nid").html(T),$(".owner_email").html(z),$(".owner_phone").html(E),$(".kam_name").html(H),$(".remarks").html(F),$(".approver").html(O),$(".approver_remarks").html(S)}catch(a){console.log(a)}}f(r.ids);async function f(l){try{const a=await c.post("AgentAllImage",{id:l});$.each(a.data,function(d,t){var s="";t.attachment_type=="trade_licence_img"?s="Trade Licence":t.attachment_type=="nid_img"?s="NID":t.attachment_type=="ca_img"?s="Agent Owner":t.attachment_type=="iata_img"?s="IATA":t.attachment_type=="hajj_licence_img"?s="Hajj Licence":t.attachment_type=="tin_img"&&(s="TIN"),$("#agent_images").append('<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap"><h6 style="font-size: 14px;" class="mb-0">'+s+'</h6><span class="text-secondary"><img height="40" width="40" src="'+t.attachment_path+'" alt=""></span></li>')})}catch(a){console.log(a)}}u(r.ids);async function u(l){try{const a=await c.post("getAgentApprovalLog",{id:l});$.each(a.data,function(d,t){console.log(t),t.status=="Recommended"?$("#agent_recommended").append('<table class="table table-borderless table-sm table-responsive"> <tbody> <tr> <td class="m-0 pl-2" width="50%"> <label for=""><b>Recommended By:</b></label> <p class="m-0 approver">'+t.approver_name+'</p> </td> <td class="m-0 pl-2" width="50%"> <label for=""><b>Remarks:</b></label> <p class="m-0 approver_remarks">'+t.remarks+"</p> </td> </tr> </tbody> </table>"):t.status=="Approved"&&$("#agent_approved").append('<table class="table table-borderless table-sm table-responsive"> <tbody> <tr> <td class="m-0 pl-2" width="50%"> <label for=""><b>Approved By:</b></label> <p class="m-0">'+t.approver_name+'</p> </td><td class="m-0 pl-2" width="50%"> <label for=""><b>Remarks:</b></label> <p class="m-0 approver_remarks">'+t.remarks+"</p> </td> </tr> </tbody></table>")})}catch(a){console.log(a)}}return(l,a)=>{const d=Q("router-link");return i(),n(U,null,[e("div",X,[a[3]||(a[3]=e("div",{class:"breadcrumb-title pe-3"},"B2B Agency",-1)),e("div",G,[e("nav",J,[e("ol",Z,[e("li",aa,[b(d,{to:{name:"Home"}},{default:p(()=>a[0]||(a[0]=[h("Dashboard")])),_:1})]),e("li",ta,[b(d,{to:{name:"AgentList"}},{default:p(()=>a[1]||(a[1]=[h("B2B Agency List")])),_:1})]),a[2]||(a[2]=e("li",{class:"breadcrumb-item active","aria-current":"page"},"View Agency",-1))])])])]),e("div",ea,[e("div",sa,[e("div",la,[e("div",da,[e("div",ra,[o.value?(i(),n("img",{key:0,src:o.value,height:"60",width:"60",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},null,8,oa)):(i(),n("img",ca)),a[4]||(a[4]=e("div",{class:"mt-3"},[e("h4",{class:"agency_name"})],-1))]),a[5]||(a[5]=_('<hr class="my-3"><div class="text-center"> Status: <div class="badge rounded-pill p-2 text-uppercase px-3" id="status_color"><i class="bx bxs-circle me-1"></i> <span id="cstatus"></span></div></div><hr class="my-2"><ul class="list-group list-group-flush"><span id="agent_images"></span></ul>',4))])])]),a[6]||(a[6]=_('<div class="col-lg-8"><div class="row"><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0">   Agency Details</h5></div><div class="card-body"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Name:</b></label><p class="m-0 agency_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Established Date:</b></label><p class="m-0 est_date"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Email:</b></label><p class="m-0 email"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Phone: </b></label><p class="m-0 phone"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Country:</b></label><p class="m-0 country"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>District: </b></label><p class="m-0 city"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Address:</b></label><p class="m-0 address">-</p></td><td class="m-0 pl-2" width="50%"><label for=""><b>City: </b></label><p class="m-0 zone"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Agent Code:</b></label><p class="m-0 agent_code"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Registration No: </b></label><p class="m-0 reg_number"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Postal Code:</b></label><p class="m-0 postal_code"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>FAX: </b></label><p class="m-0 fax"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Civil Aviation Certificate No:</b></label><p class="m-0 ca_number">-</p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Trade License: </b></label><p class="m-0 trade_licence">-</p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>IATA:</b></label><p class="m-0 iata_number"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Hajj License: </b></label><p class="m-0 hajj_agency_number"></p></td></tr></tbody></table></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0">   Primary User Information</h5></div><div class="card-body"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Owner&#39;s Name:</b></label><p class="m-0 owner_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Designation:</b></label><p class="m-0 owner_designation"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>NID:</b></label><p class="m-0 owner_nid"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Date of Birth: </b></label><p class="m-0 ownerdob"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Email:</b></label><p class="m-0 owner_email"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Phone: </b></label><p class="m-0 owner_phone">x</p></td></tr></tbody></table></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0">   KAM Information &amp; Remarks</h5></div><div class="card-body"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>KAM:</b></label><p class="m-0 kam_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Remarks: </b></label><p class="m-0 remarks"></p></td></tr></tbody></table></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0">   Recommendeation</h5></div><div class="card-body"><span id="agent_recommended"></span></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0">   Approval</h5></div><div class="card-body"><span id="agent_approved"></span></div></div></div></div></div>',1))])],64)}}};export{ha as default};
