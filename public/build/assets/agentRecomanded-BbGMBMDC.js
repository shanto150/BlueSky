import{e as G,f as X,a as J,F as r,N as p,h as Q,i as W,c,o as m,b as e,p as h,q as _,d as u,j as f,w as b,O as g,v as Z,G as tt}from"./app-BYvki4Mx.js";import{_ as et}from"./Plane_origin-DMaQ2OAv.js";import"https://code.jquery.com/jquery-3.7.1.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const at={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},st={class:"ps-3"},lt={"aria-label":"breadcrumb"},ot={class:"breadcrumb mb-0 p-0"},dt={class:"breadcrumb-item"},rt={class:"breadcrumb-item"},nt={class:"row"},it={class:"col-lg-3"},ct={class:"card"},mt={class:"card-body"},bt={class:"d-flex flex-column align-items-center text-center"},pt=["src"],ht={key:1,src:et,height:"60",width:"60",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},_t={class:"col-lg-3"},ut={id:"addRecomandationForm"},ft={class:"card"},gt={class:"card-body"},vt={class:"row"},wt={class:"col-md-12"},yt={class:"col-md-12 mt-2"},$t={class:"col-md-12 mt-2"},xt={class:"card-footer"},At={class:"d-block"},Rt={__name:"agentRecomanded",props:["ids"],setup(v){const n=v,i=G(""),l=X({note:"",status:"",approver:"",agent_id:"",useEmail:J().email});w(n.ids);async function w(d){try{const t=await r.post("recommendedAgent",{id:d}),o=t.data[0].name,a=t.data[0].status,s=t.data[0].email,k=t.data[0].established_date,j=t.data[0].address,C=t.data[0].phone,D=t.data[0].country,N=t.data[0].city,R=t.data[0].zone,I=t.data[0].agent_code,M=t.data[0].postal_code,P=t.data[0].reg_number,B=t.data[0].fax,T=t.data[0].ca_number,Y=t.data[0].trade_licence,E=t.data[0].iata_number,S=t.data[0].hajj_agency_number,V=t.data[0].owner,H=t.data[0].designation,L=t.data[0].owner_nid,z=t.data[0].dob,F=t.data[0].owner_email,K=t.data[0].owner_phone,U=t.data[0].kam,O=t.data[0].remarks,q=t.data[0].logo_path;i.value=q,a=="Pending"?($("#status_color").addClass("text-warning bg-light-warning"),$("#cstatus").html(a)):a=="Approved"?($("#status_color").addClass("text-success bg-light-success"),$("#cstatus").html(a)):a=="Hold"?($("#status_color").addClass("text-warning bg-light-warning"),$("#cstatus").html(a)):a=="Recommended"?($("#status_color").addClass("text-info bg-light-info"),$("#cstatus").html(a)):a=="Reject"&&($("#status_color").addClass("text-danger bg-light-danger"),$("#cstatus").html(a)),$(".agency_name").html(o),$(".email").html(s),$(".est_date").html(p(k).format("DD-MMM-YYYY")),$(".ownerdob").html(p(z).format("DD-MMM-YYYY")),$(".address").html(j),$(".phone").html(C),$(".country").html(D),$(".city").html(N),$(".zone").html(R),$(".agent_code").html(I),$(".postal_code").html(M),$(".reg_number").html(P),$(".fax").html(B),$(".ca_number").html(T),$(".trade_licence").html(Y),$(".iata_number").html(E),$(".hajj_agency_number").html(S),$(".owner_name").html(V),$(".owner_designation").html(H),$(".owner_nid").html(L),$(".owner_email").html(F),$(".owner_phone").html(K),$(".kam_name").html(U),$(".remarks").html(O)}catch(t){console.log(t)}}y(n.ids);async function y(d){try{const t=await r.post("AgentAllImage",{id:d});$.each(t.data,function(o,a){var s="";a.attachment_type=="trade_licence_img"?s="Trade Licence":a.attachment_type=="nid_img"?s="NID":a.attachment_type=="ca_img"?s="Agent Owner":a.attachment_type=="iata_img"?s="IATA":a.attachment_type=="hajj_licence_img"?s="Hajj Licence":a.attachment_type=="tin_img"&&(s="TIN"),$("#agent_images").append('<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap"><h6 style="font-size: 14px;" class="mb-0">'+s+'</h6><span class="text-secondary"><img height="40" width="40" src="'+a.attachment_path+'" alt=""></span></li>')})}catch(t){console.log(t)}}x();async function x(){try{const t=await r.get("getKam");var d=[];$.each(t.data,function(o,a){var s={id:a.id,text:a.name};d.push(s)}),$("#approver").select2({placeholder:"=Select=",theme:"bootstrap-5",width:"100%",allowClear:!0,height:"50",data:d,tags:!0,templateResult:function(o){if(!o.id)return o.text;var a=$('<div class="clearfix"><div class="float-start">'+o.text+"</div></div>");return a}}),$("#approver").prepend('<option selected=""></option>')}catch{}}Q(()=>{$("#status").on("change",function(){l.status_val=$(this).val()}),$("#approver").on("change",function(){l.approver=$(this).val()})});async function A(d){l.agent_id=d.ids;try{const t=await r.post("/agentRecomendation/update",l);Notification.showToast("s",t.data.message)}catch(t){ErrorCatch.CatchError(t)}}return(d,t)=>{const o=W("router-link");return m(),c(tt,null,[e("div",at,[t[7]||(t[7]=e("div",{class:"breadcrumb-title pe-3"},"B2B Agency",-1)),e("div",st,[e("nav",lt,[e("ol",ot,[e("li",dt,[h(o,{to:{name:"Home"}},{default:_(()=>t[4]||(t[4]=[u("Dashboard")])),_:1})]),e("li",rt,[h(o,{to:{name:"AgentList"}},{default:_(()=>t[5]||(t[5]=[u("B2B Agency List")])),_:1})]),t[6]||(t[6]=e("li",{class:"breadcrumb-item active","aria-current":"page"},"Recommend Agency",-1))])])])]),e("div",nt,[e("div",it,[e("div",ct,[e("div",mt,[e("div",bt,[i.value?(m(),c("img",{key:0,src:i.value,height:"60",width:"60",class:"border border-1 rounded rounded-2",alt:"Profile Picture"},null,8,pt)):(m(),c("img",ht)),t[8]||(t[8]=e("div",{class:"mt-3"},[e("h4",{class:"agency_name"})],-1))]),t[9]||(t[9]=f('<hr class="my-3"><div class="text-center"> Status: <div class="badge rounded-pill p-2 text-uppercase px-3" id="status_color"><i class="bx bxs-circle me-1"></i> <span id="cstatus"></span></div></div><hr class="my-2"><ul class="list-group list-group-flush"><span id="agent_images"></span></ul>',4))])])]),t[16]||(t[16]=f('<div class="col-lg-6"><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #027de2;">   Agency Details</h5></div><div class="card-body"><div class="row g-3"><div class="col-md-12"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Name:</b></label><p class="m-0 agency_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Established Date:</b></label><p class="m-0 est_date"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Email:</b></label><p class="m-0 email"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Phone: </b></label><p class="m-0 phone"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Country:</b></label><p class="m-0 country"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>District: </b></label><p class="m-0 city"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Address:</b></label><p class="m-0 address">-</p></td><td class="m-0 pl-2" width="50%"><label for=""><b>City: </b></label><p class="m-0 zone"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Agent Code:</b></label><p class="m-0 agent_code"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Registration No: </b></label><p class="m-0 reg_number"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Postal Code:</b></label><p class="m-0 postal_code"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>FAX: </b></label><p class="m-0 fax"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Civil Aviation Certificate No:</b></label><p class="m-0 ca_number">-</p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Trade License: </b></label><p class="m-0 trade_licence">-</p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>IATA:</b></label><p class="m-0 iata_number"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Hajj License: </b></label><p class="m-0 hajj_agency_number"></p></td></tr></tbody></table></div></div></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #7239ea;">   Primary User Infomation</h5></div><div class="card-body"><div class="row"><div class="col-md-12"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Owner&#39;s Name:</b></label><p class="m-0 owner_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Designation:</b></label><p class="m-0 owner_designation"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>NID:</b></label><p class="m-0 owner_nid"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Date of Birth: </b></label><p class="m-0 ownerdob"></p></td></tr><tr><td class="m-0 pl-2" width="50%"><label for=""><b>Email:</b></label><p class="m-0 owner_email"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Phone: </b></label><p class="m-0 owner_phone">x</p></td></tr></tbody></table></div></div></div></div></div><div class="col-md-12"><div class="card"><div class="card-header"><h5 class="m-0 p-0" style="border-left:5px solid #00d54a;">   KAM Infomation &amp; Remarks </h5></div><div class="card-body"><div class="row"><div class="col-md-12"><table class="table table-borderless table-sm table-responsive"><tbody><tr><td class="m-0 pl-2" width="50%"><label for=""><b>KAM:</b></label><p class="m-0 kam_name"></p></td><td class="m-0 pl-2" width="50%"><label for=""><b>Remarks: </b></label><p class="m-0 remarks"></p></td></tr></tbody></table></div></div></div></div></div></div>',1)),e("div",_t,[e("form",ut,[e("div",ft,[t[15]||(t[15]=e("div",{class:"card-header"},[e("h5",{class:"m-0 p-0",style:{"border-left":"5px solid #00d54a"}},"   Recomandation")],-1)),e("div",gt,[e("div",vt,[e("div",wt,[t[11]||(t[11]=e("label",{for:"status",class:"form-label"},"Status",-1)),b(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[0]||(t[0]=a=>l.status=a),id:"status","aria-label":"Default select example"},t[10]||(t[10]=[e("option",{value:"Recommended",selected:""},"Recommended",-1),e("option",{value:"Hold"},"Hold",-1),e("option",{value:"Decline"},"Decline",-1)]),512),[[g,l.status]])]),e("div",yt,[t[12]||(t[12]=e("label",{for:"Kam",class:"form-label"},"Approver",-1)),b(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[1]||(t[1]=a=>l.approver=a),id:"approver","aria-label":"Default select example"},null,512),[[g,l.approver]])]),e("div",$t,[t[13]||(t[13]=e("label",{for:"date",class:"form-label"},"Recommendation Note",-1)),b(e("textarea",{class:"form-control form-control-sm","onUpdate:modelValue":t[2]||(t[2]=a=>l.note=a),name:"note",id:"note"},null,512),[[Z,l.note]])])])]),e("div",xt,[e("div",At,[t[14]||(t[14]=e("button",{class:"btn btn-sm btn-outline-danger float-left"},"Cancel",-1)),e("button",{type:"button",onClick:t[3]||(t[3]=a=>A(n)),class:"btn btn-sm btn-outline-primary float-end"},"Submit")])])])])])])],64)}}};export{Rt as default};
